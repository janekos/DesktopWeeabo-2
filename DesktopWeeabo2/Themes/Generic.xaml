<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:local="clr-namespace:DesktopWeeabo2.CustomControls"
                    xmlns:conv="clr-namespace:DesktopWeeabo2.Helpers"
                    xmlns:enum="clr-namespace:DesktopWeeabo2.ViewModels.Shared">

    <conv:MultiValueCustomConverter x:Key="MultiValueCustomConverter" />
    <conv:CustomConverter x:Key="CustomConverter" />

    <Style TargetType="{x:Type local:SelectableButton}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:SelectableButton}">
                    <Button Content="{TemplateBinding SBContent }"
                            Command="{TemplateBinding SBCommand}"
                            CommandParameter="{TemplateBinding SBCommandParameter}"
                            Cursor="Hand">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Style.Triggers>
                                    <Trigger Property="IsCancel"
                                             Value="true">
                                        <Setter Property="Background"
                                                Value="LightCyan" />
                                    </Trigger>
                                    <Trigger Property="IsCancel"
                                             Value="false">
                                        <Setter Property="Background"
                                                Value="Beige" />
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                        <Button.IsCancel>
                            <MultiBinding Converter="{StaticResource MultiValueCustomConverter}"
                                          TargetNullValue="false">
                                <Binding Path="SBCurrentView"
                                         RelativeSource="{RelativeSource TemplatedParent}" />
                                <Binding Path="SBIsSelectedParameter"
                                         RelativeSource="{RelativeSource TemplatedParent}" />
                            </MultiBinding>
                        </Button.IsCancel>
                        <Button.IsEnabled>
                            <MultiBinding Converter="{StaticResource MultiValueCustomConverter}"
                                          TargetNullValue="true">
                                <Binding Path="SBSelectedItem"
                                         RelativeSource="{RelativeSource TemplatedParent}" />
                                <Binding Path="SBPressedTransferButton"
                                         RelativeSource="{RelativeSource TemplatedParent}" />
                                <Binding Path="SBIsEnabledParameter"
                                         RelativeSource="{RelativeSource TemplatedParent}" />
                            </MultiBinding>
                        </Button.IsEnabled>
                    </Button>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="{x:Type local:InfoBoxTextBlock}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:InfoBoxTextBlock}">
                    <TextBlock FontSize="16"
                               TextWrapping="Wrap"
                               Visibility="{Binding Path=IBTBDynamicItem, Converter={StaticResource CustomConverter}, ConverterParameter=isStringEmpty, RelativeSource={RelativeSource TemplatedParent}}">
                                <Run Text="{TemplateBinding IBTBStaticText}"
                                     FontWeight="Bold" />
                                <Run Text="{Binding Path=IBTBDynamicItem, Converter={StaticResource CustomConverter}, ConverterParameter=formatInfoBoxTextBlock, RelativeSource={RelativeSource TemplatedParent}}" />
                    </TextBlock>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="{x:Type local:WrapPanelItem}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:WrapPanelItem}">
                    <Border BorderBrush="Black"
                            BorderThickness="1"
                            Margin="5"
                            Padding="3"
                            ClipToBounds="True"
                            MaxWidth="220">
                        <StackPanel Orientation="Vertical"
                                    VerticalAlignment="Top">
                            <Image Margin="-3,-3,-3,3">
                                <Image.Source>
                                    <BitmapImage UriSource="{Binding WPIImage, RelativeSource={RelativeSource TemplatedParent}}"
                                                 UriCachePolicy=" CacheIfAvailable " />
                                </Image.Source>
                            </Image>
                            <TextBlock Text="{TemplateBinding WPITitleEnglish}"
                                       TextWrapping="Wrap"
                                       Visibility="{Binding Path=WPITitleEnglish, Converter={StaticResource CustomConverter}, ConverterParameter=isStringEmpty, RelativeSource={RelativeSource TemplatedParent}}" />
                            <TextBlock Text="{TemplateBinding WPITitleRomaji}"
                                       TextWrapping="Wrap"
                                       Visibility="{Binding Path=WPITitleRomaji, Converter={StaticResource CustomConverter}, ConverterParameter=isStringEmpty, RelativeSource={RelativeSource TemplatedParent}}" />
                            <TextBlock Text="{TemplateBinding WPITitleNative}"
                                       TextWrapping="Wrap"
                                       Visibility="{Binding Path=WPITitleNative, Converter={StaticResource CustomConverter}, ConverterParameter=isStringEmpty, RelativeSource={RelativeSource TemplatedParent}}" />
                        </StackPanel>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="{x:Type local:ChangeConfirmer}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:ChangeConfirmer}">
                    <ControlTemplate.Resources>
                        <DataTemplate x:Key="WatchedOrDroppedOrRedConfirmer">
                            <StackPanel>
                                <TextBlock FontSize="14" Margin="0, 0, 0, 5" Text="Add a personal review:" />
                                <TextBox FontSize="14" Margin="0, 0, 0, 10" Height="100" HorizontalAlignment="Stretch"
                                         Text="{Binding Path=CCSelectedItemPersonalReview, RelativeSource={RelativeSource AncestorType=local:ChangeConfirmer}}" />
                                <Grid Margin="0, 0, 0, 5">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="140" />
                                        <ColumnDefinition Width="60" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" FontSize="14" Text="Add a personal score:" />
                                    <TextBox Grid.Column="1" FontSize="14"
                                             Text="{Binding Path=CCSelectedItemPersonalScore, RelativeSource={RelativeSource AncestorType=local:ChangeConfirmer}}" />
                                </Grid>
                                <TextBlock Margin="0, 0, 0, 10"
                                           Text="*Above fields not required for submit" />
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="60" />
                                        <ColumnDefinition Width="70" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <Button Grid.Column="0" Command="{Binding Path=CCSaveItemCommand, RelativeSource={RelativeSource AncestorType=local:ChangeConfirmer}}"
                                            Width="60">Submit</Button>
                                    <Button Grid.Column="1" Width="60" Command="{Binding Path=CCTriggerViewStatusWasChangedCommand, RelativeSource={RelativeSource AncestorType=local:ChangeConfirmer}}"
                                            CommandParameter="">Cancel</Button>
                                </Grid>
                            </StackPanel>
                        </DataTemplate>
                        <DataTemplate x:Key="ChangeConfirmer">
                            <StackPanel>
                                <TextBlock Text="ChangeConfirmer" />
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="60" />
                                        <ColumnDefinition Width="70" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <Button Grid.Column="0" Command="{Binding Path=CCSaveItemCommand, RelativeSource={RelativeSource AncestorType=local:ChangeConfirmer}}"
                                            Width="60">Submit</Button>
                                    <Button Grid.Column="1" Width="60"
                                            Command="{Binding Path=CCTriggerViewStatusWasChangedCommand, RelativeSource={RelativeSource AncestorType=local:ChangeConfirmer}}"
                                            CommandParameter="">Cancel</Button>
                                </Grid>
                            </StackPanel>
                        </DataTemplate>
                        <DataTemplate x:Key="DeleteConfirmer">
                            <StackPanel>
                                <TextBlock TextWrapping="Wrap"
                                           Margin="0, 0, 10, 0">
                <Run Text="Are you sure you want to remove "
                                    FontWeight="Bold" />
                <Run Text="{Binding Path=CCSelectedItemTitle, RelativeSource={RelativeSource AncestorType=local:ChangeConfirmer}}" />
                                </TextBlock>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="60" />
                                        <ColumnDefinition Width="70" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <Button Grid.Column="0"
                                            Command="{Binding Path=CCDeleteItemCommand, RelativeSource={RelativeSource AncestorType=local:ChangeConfirmer}}"
                                            Width="60">Submit</Button>
                                    <Button Grid.Column="1"
                                            Width="60"
                                            Command="{Binding Path=CCTriggerViewStatusWasChangedCommand, RelativeSource={RelativeSource AncestorType=local:ChangeConfirmer}}"
                                            CommandParameter="">Cancel</Button>
                                </Grid>
                            </StackPanel>
                        </DataTemplate>
                    </ControlTemplate.Resources>
                    <Border BorderBrush="black"
                            BorderThickness="1,0,1,1"
                            VerticalAlignment="Top"
                            Margin="0,30,0,0"
                            Visibility="{Binding CCPressedTransferButton, Converter={StaticResource CustomConverter}, ConverterParameter=isStringEmpty, RelativeSource={RelativeSource TemplatedParent}}"
                            HorizontalAlignment="Stretch">
                        <StackPanel Background="White">
                            <ContentControl Margin="10">
                                <ContentControl.Style>
                                    <Style TargetType="ContentControl">
                                        <Setter Property="ContentTemplate"
                                                Value="{StaticResource WatchedOrDroppedOrRedConfirmer}" />
                                        <Style.Triggers>
                                            <!--changeConfirmer-->
                                            <DataTrigger Binding="{Binding CCPressedTransferButton, RelativeSource={RelativeSource TemplatedParent}}"
                                                         Value="{x:Static enum:StatusView.TOWATCH}">
                                                <Setter Property="ContentTemplate"
                                                        Value="{StaticResource ChangeConfirmer}" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding CCPressedTransferButton, RelativeSource={RelativeSource TemplatedParent}}"
                                                         Value="{x:Static enum:StatusView.WATCHING}">
                                                <Setter Property="ContentTemplate"
                                                        Value="{StaticResource ChangeConfirmer}" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding CCPressedTransferButton, RelativeSource={RelativeSource TemplatedParent}}"
                                                         Value="{x:Static enum:StatusView.TOREAD}">
                                                <Setter Property="ContentTemplate"
                                                        Value="{StaticResource ChangeConfirmer}" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding CCPressedTransferButton, RelativeSource={RelativeSource TemplatedParent}}"
                                                         Value="{x:Static enum:StatusView.READING}">
                                                <Setter Property="ContentTemplate"
                                                        Value="{StaticResource ChangeConfirmer}" />
                                            </DataTrigger>
                                            <!--watchedordroppedorred-->
                                            <DataTrigger Binding="{Binding CCPressedTransferButton, RelativeSource={RelativeSource TemplatedParent}}"
                                                         Value="{x:Static enum:StatusView.VIEWED}">
                                                <Setter Property="ContentTemplate"
                                                        Value="{StaticResource WatchedOrDroppedOrRedConfirmer}" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding CCPressedTransferButton, RelativeSource={RelativeSource TemplatedParent}}"
                                                         Value="{x:Static enum:StatusView.DROPPED}">
                                                <Setter Property="ContentTemplate"
                                                        Value="{StaticResource WatchedOrDroppedOrRedConfirmer}" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding CCPressedTransferButton, RelativeSource={RelativeSource TemplatedParent}}"
                                                         Value="{x:Static enum:StatusView.RED}">
                                                <Setter Property="ContentTemplate"
                                                        Value="{StaticResource WatchedOrDroppedOrRedConfirmer}" />
                                            </DataTrigger>
                                            <!--delete-->
                                            <DataTrigger Binding="{Binding CCPressedTransferButton, RelativeSource={RelativeSource TemplatedParent}}"
                                                         Value="{x:Static enum:StatusView.DELETE}">
                                                <Setter Property="ContentTemplate"
                                                        Value="{StaticResource DeleteConfirmer}" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </ContentControl.Style>
                            </ContentControl>
                        </StackPanel>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="{x:Type local:AdvancedSearch}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:AdvancedSearch}">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>
